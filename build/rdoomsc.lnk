# RealDOOM linker file

option quiet
option map
# tested as low as 3000 successfully. 2000 crashes sometimes, sorta deep into demos??
#option stack=2536
option stack=4096
debug all
libpath %WATCOM%\lib286
libpath %WATCOM%\lib286\dos
format dos
name doomout

#file p_setup.obj
#NEWSEGMENT
#file p_sight.obj
#NEWSEGMENT

file m_near.obj
file d_init.obj
file st_init.obj
file r_init.obj
file w_init.obj
file i_init.obj
file z_umb.obj
file z_init.obj
file p_init.obj

NEWSEGMENT
file i_main.obj
file i_quit.obj
file i_ibm.obj
file i_sound.obj
file d_main.obj
file d_net.obj
file g_game.obj
file m_misc.obj
file am_map.obj
file st_stuff.obj
file hu_stuff.obj
file hu_lib.obj
file m_menu.obj
file sounds.obj
file d_algo.obj
file dmx.obj
file d_int.obj
file memory.obj
file math.obj
file main.obj

#these files put in overlay 
file g_setup.obj
file r_setup.obj
file st_setup.obj
file hu_setup.obj



#todo put these in the future wad segment. maybe pull out p_tick.
NEWSEGMENT
file s_sound.obj
file p_ceilng.obj
file p_doors.obj
file p_enemy.obj
file p_floor.obj
file p_inter.obj
file p_lights.obj
file p_map.obj
file p_maputl.obj
file p_math.obj
file p_plats.obj
file p_pspr.obj
file p_spec.obj
file p_switch.obj
file p_mobj.obj
file p_telept.obj
file p_tick.obj
file p_user.obj


NEWSEGMENT
file r_bsp.obj
file r_data.obj
file r_math.obj
file r_mainhi.obj
#file r_span.obj
file r_draw.obj
file r_main.obj
file r_plane.obj
file r_segs.obj
file r_things.obj
file w_wad.obj
file video.obj
file v_video.obj
file z_zone.obj
file z_scamp.obj
#file info.obj
file d_math.obj


NEWSEGMENT
file p_setup.obj
file p_sight.obj



# here we move _DATA before CONST and CONST2.
ORDER      clname CODE 
           clname FAR_DATA #segaddr=22FD
           clname BEGDATA segment _NULL segment _AFTERNULL 
           clname DATA  segment _FIXEDDATA segment _DATA
           clname BSS
           clname STACK
           clname START 
